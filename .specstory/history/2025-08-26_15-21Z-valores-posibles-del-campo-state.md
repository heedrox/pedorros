<!-- Generated by SpecStory -->

# Valores posibles del campo "STATE" (2025-08-26 15:21Z)

_**User**_

dime qu√© valoes puede tener el campo "STATE"

---

_**Assistant**_

Voy a revisar el archivo `firebase-database.js` para entender qu√© valores puede tener el campo "STATE" en la base de datos de Firebase.


---

Read file: web/firebase-database.js

---

Ahora voy a buscar en el c√≥digo para encontrar m√°s informaci√≥n sobre los posibles valores del campo "STATE" del juego.


---

<details>
            <summary>Grep search for "state.*=" ‚Ä¢ **8** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///Users/jordimarti/Development/pedorro/test/unit/disimular.test.js` | L141 | `const gameState = {` |
| `file:///Users/jordimarti/Development/pedorro/test/unit/disimular.test.js` | L161 | `const gameState = {` |
| `file:///Users/jordimarti/Development/pedorro/test/unit/disimular.test.js` | L169 | `const originalState = { ...gameState };` |
| `file:///Users/jordimarti/Development/pedorro/test/unit/disimular.test.js` | L181 | `const gameState1 = {` |
| `file:///Users/jordimarti/Development/pedorro/test/unit/disimular.test.js` | L194 | `const gameState2 = {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L21 | `export const getResetGameState = () => ({` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L36 | `export const resetGameState = async (gameCode) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L68 | `export const setupGameStateListener = (gameCode, callback) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L206 | `export const getGameState = async (gameCode) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L232 | `export const updateGameState = async (gameCode, newState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L238 | `if (!newState || typeof newState !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-config.js` | L7 | `const { initializeApp, getAuth, signInAnonymously, onAuthStateChanged, getDatabase } = window.Firebase;` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-config.js` | L68 | `export const onAuthStateChangedListener = (callback) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L53 | `let authState = AUTH_STATES.UNAUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L56 | `let gameStateListenerCleanup = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L59 | `let gameState = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L62 | `let accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L108 | `const renderAuthScreen = (authState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L141 | `const renderScreen = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L142 | `const { state, numRound, playerNumber, totalPlayers } = gameState;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L160 | `const renderStartScreen = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L215 | `const renderRankingScreen = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L232 | `const currentGameState = await getGameState(gameState.gameCode);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L341 | `const handleNextRoundClick = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L352 | `if (gameState.state !== 'RANKING') {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L368 | `gameState = changeGameState(gameState, 'START', newNumRound);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L385 | `const renderAcuseScreen = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L426 | `const setupSoundButtons = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L457 | `const handlePeditoClick = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L485 | `const handlePedorroClick = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L526 | `accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L528 | `accusationsState[i] = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L532 | `accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L534 | `accusationsState[i] = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L544 | `const currentState = accusationsState[playerNumber] || 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L549 | `newState = 'naranja';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L552 | `newState = 'rojo';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L555 | `newState = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L558 | `newState = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L562 | `accusationsState[playerNumber] = newState;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L605 | `authState = AUTH_STATES.AUTHENTICATING;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L613 | `authState = AUTH_STATES.AUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L620 | `authState = AUTH_STATES.UNAUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L626 | `authState = AUTH_STATES.UNAUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L637 | `const initialGameState = initializeGameState(window.location.href);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L640 | `accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L644 | `let firebaseGameState = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L647 | `firebaseGameState = await getGameState(initialGameState.gameCode);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L656 | `gameState = initialGameState;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L659 | `gameState = {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L693 | `gameStateListenerCleanup = setupGameStateListener(gameState.gameCode, handleGameStateChange);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L720 | `gameState = handleDisimularClick(gameState);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L745 | `accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L823 | `getGameState: () => gameState,` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L824 | `changeGameState: (newState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L825 | `gameState = changeGameState(gameState, newState);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L831 | `gameState = result.gameState;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L844 | `const handleGameStateChange = async (gameData) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L854 | `if (gameData.state === "START") {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L898 | `if (gameData.state && gameData.state !== gameState.state) {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L902 | `gameState = changeGameState(gameState, gameData.state);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L916 | `onAuthStateChangedListener((user) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L919 | `authState = AUTH_STATES.AUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L928 | `authState = AUTH_STATES.UNAUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L951 | `gameStateListenerCleanup = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L960 | `gameStateListenerCleanup = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1184 | `gameState = changeGameState(gameState, 'ACUSE');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1255 | `const calculateAndUpdateRanking = async (accusationsData, gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1274 | `const currentGameState = await getGameState(gameState.gameCode);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1345 | `if (progress.totalSent === progress.totalExpected && gameState.state === 'ACUSE') {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1362 | `gameState = changeGameState(gameState, 'RANKING');` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L7 | `export const AUTH_STATES = {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L14 | `export const createGameState = (state = 'START', numRound = 1, gameCode = '', playerNumber = 0, totalPlayers = 0) => ({` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L63 | `export const initializeGameState = (url) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L74 | `export const changeGameState = (gameState, newState, newNumRound = null) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L75 | `if (!gameState || typeof gameState !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L79 | `const { state, numRound } = gameState;` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L89 | `export const updateRound = (currentState, newNumRound) => ({` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L95 | `export const validateGameState = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L97 | `typeof gameState.state === 'string' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L98 | `typeof gameState.numRound === 'number' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L99 | `typeof gameState.gameCode === 'string' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L100 | `typeof gameState.playerNumber === 'number' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L101 | `typeof gameState.totalPlayers === 'number' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L104 | `gameState.playerNumber <= gameState.totalPlayers;` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L108 | `export const getPlayerInfo = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L116 | `isPlayerValid: gameState.playerNumber > 0 && gameState.playerNumber <= gameState.totalPlayers` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L121 | `export const getRoundInfo = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L122 | `if (!gameState || typeof gameState.numRound !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L129 | `isLastRound: gameState.numRound >= 5` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L134 | `export const isPlayerOne = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L136 | `typeof gameState === 'object' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L137 | `typeof gameState.playerNumber === 'number' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L138 | `gameState.playerNumber === 1;` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L142 | `export const getResetGameState = () => ({` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L302 | `export const handleDisimularClick = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L303 | `const { state, numRound, gameCode, playerNumber, totalPlayers } = gameState;` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L315 | `export const getAccusationState = (accusations, playerNumber) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L366 | `const state = getAccusationState(accusations, i);` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L403 | `export const convertAccusationColorsToRoles = (accusationsState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L53 | `let authState = AUTH_STATES.UNAUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L56 | `let gameStateListenerCleanup = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L59 | `let gameState = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L62 | `let accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L108 | `const renderAuthScreen = (authState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L141 | `const renderScreen = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L142 | `const { state, numRound, playerNumber, totalPlayers } = gameState;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L160 | `const renderStartScreen = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L215 | `const renderRankingScreen = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L232 | `const currentGameState = await getGameState(gameState.gameCode);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L341 | `const handleNextRoundClick = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L352 | `if (gameState.state !== 'RANKING') {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L368 | `gameState = changeGameState(gameState, 'START', newNumRound);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L385 | `const renderAcuseScreen = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L426 | `const setupSoundButtons = (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L457 | `const handlePeditoClick = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L485 | `const handlePedorroClick = async (gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L526 | `accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L528 | `accusationsState[i] = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L532 | `accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L534 | `accusationsState[i] = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L544 | `const currentState = accusationsState[playerNumber] || 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L549 | `newState = 'naranja';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L552 | `newState = 'rojo';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L555 | `newState = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L558 | `newState = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L562 | `accusationsState[playerNumber] = newState;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L605 | `authState = AUTH_STATES.AUTHENTICATING;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L613 | `authState = AUTH_STATES.AUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L620 | `authState = AUTH_STATES.UNAUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L626 | `authState = AUTH_STATES.UNAUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L637 | `const initialGameState = initializeGameState(window.location.href);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L640 | `accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L644 | `let firebaseGameState = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L647 | `firebaseGameState = await getGameState(initialGameState.gameCode);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L656 | `gameState = initialGameState;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L659 | `gameState = {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L693 | `gameStateListenerCleanup = setupGameStateListener(gameState.gameCode, handleGameStateChange);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L720 | `gameState = handleDisimularClick(gameState);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L745 | `accusationsState = {};` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L823 | `getGameState: () => gameState,` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L824 | `changeGameState: (newState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L825 | `gameState = changeGameState(gameState, newState);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L831 | `gameState = result.gameState;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L844 | `const handleGameStateChange = async (gameData) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L854 | `if (gameData.state === "START") {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L898 | `if (gameData.state && gameData.state !== gameState.state) {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L902 | `gameState = changeGameState(gameState, gameData.state);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L916 | `onAuthStateChangedListener((user) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L919 | `authState = AUTH_STATES.AUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L928 | `authState = AUTH_STATES.UNAUTHENTICATED;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L951 | `gameStateListenerCleanup = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L960 | `gameStateListenerCleanup = null;` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1184 | `gameState = changeGameState(gameState, 'ACUSE');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1255 | `const calculateAndUpdateRanking = async (accusationsData, gameState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1274 | `const currentGameState = await getGameState(gameState.gameCode);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1345 | `if (progress.totalSent === progress.totalExpected && gameState.state === 'ACUSE') {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1362 | `gameState = changeGameState(gameState, 'RANKING');` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-config.js` | L7 | `const { initializeApp, getAuth, signInAnonymously, onAuthStateChanged, getDatabase } = window.Firebase;` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-config.js` | L68 | `export const onAuthStateChangedListener = (callback) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L21 | `export const getResetGameState = () => ({` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L36 | `export const resetGameState = async (gameCode) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L68 | `export const setupGameStateListener = (gameCode, callback) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L206 | `export const getGameState = async (gameCode) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L232 | `export const updateGameState = async (gameCode, newState) => {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L238 | `if (!newState || typeof newState !== 'string') {` |

</details>

---

Ahora voy a buscar espec√≠ficamente los valores literales del campo "state" para identificar todos los posibles estados:


---

<details>
            <summary>Grep search for "'[A-Z]+'" ‚Ä¢ **7** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L41 | `state: 'START',` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L70 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L103 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L111 | `if (!nextSounds || typeof nextSounds !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L148 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L173 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L208 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L234 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L238 | `if (!newState || typeof newState !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L275 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L279 | `if (!playerNumber || typeof playerNumber !== 'number' || playerNumber < 1) {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L283 | `if (!accusations || typeof accusations !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L324 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L328 | `if (typeof callback !== 'function') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L361 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L365 | `if (!ranking || typeof ranking !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L369 | `if (!lastRoundScore || typeof lastRoundScore !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L410 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L414 | `if (typeof newNumRound !== 'number' || newNumRound < 1) {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L420 | `state: 'START',` |
| `file:///Users/jordimarti/Development/pedorro/jest.config.js` | L8 | `coverageDirectory: 'coverage',` |
| `file:///Users/jordimarti/Development/pedorro/jest.config.js` | L17 | `testEnvironment: 'jsdom',` |
| `file:///Users/jordimarti/Development/pedorro/jest.config.js` | L38 | `'default',` |
| `file:///Users/jordimarti/Development/pedorro/jest.config.js` | L40 | `outputDirectory: 'coverage',` |
| `file:///Users/jordimarti/Development/pedorro/test/e2e/generated/1-anonymous-login.spec.js` | L18 | `await expect(page.locator('#login-screen .game-title')).toHaveText('PEDORROS');` |
| `file:///Users/jordimarti/Development/pedorro/test/e2e/generated/1-anonymous-login.spec.js` | L23 | `await expect(accederButton).toHaveText('ACCEDER');` |
| `file:///Users/jordimarti/Development/pedorro/test/e2e/generated/1-anonymous-login.spec.js` | L105 | `await expect(page.locator('#login-screen .game-title')).toHaveText('PEDORROS');` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L8 | `AUTHENTICATING: 'AUTHENTICATING',` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L9 | `AUTHENTICATED: 'AUTHENTICATED',` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L10 | `UNAUTHENTICATED: 'UNAUTHENTICATED'` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L14 | `export const createGameState = (state = 'START', numRound = 1, gameCode = '', playerNumber = 0, totalPlayers = 0) => ({` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L29 | `if (!url || typeof url !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L67 | `return createGameState('START', 1, parsedURL.gameCode, parsedURL.playerNumber, parsedURL.totalPlayers);` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L75 | `if (!gameState || typeof gameState !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L97 | `typeof gameState.state === 'string' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L98 | `typeof gameState.numRound === 'number' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L99 | `typeof gameState.gameCode === 'string' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L100 | `typeof gameState.playerNumber === 'number' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L101 | `typeof gameState.totalPlayers === 'number' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L122 | `if (!gameState || typeof gameState.numRound !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L136 | `typeof gameState === 'object' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L137 | `typeof gameState.playerNumber === 'number' &&` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L171 | `if (typeof totalPlayers !== 'number' || !Number.isInteger(totalPlayers)) {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L254 | `if (!Array.isArray(peditos) || typeof pedorro !== 'number' || typeof playerNumber !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L255 | `return 'neutral';` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L259 | `return 'pedito';` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L263 | `return 'pedorro';` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L266 | `return 'neutral';` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L272 | `if (!nextSounds || typeof nextSounds !== 'object' ||` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L273 | `!Array.isArray(peditos) || typeof pedorro !== 'number' ||` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L274 | `typeof playerNumber !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L287 | `if (typeof soundValue === 'number' && soundValue >= 1 && soundValue <= 5) {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L290 | `if (playerRole === 'pedito') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L292 | `} else if (playerRole === 'pedorro') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L316 | `if (!accusations || typeof accusations !== 'object' || typeof playerNumber !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L317 | `return 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L320 | `return accusations[playerNumber] || 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L326 | `if (!accusations || typeof accusations !== 'object' || typeof totalPlayers !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L368 | `case 'verde':` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L371 | `case 'naranja':` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L374 | `case 'rojo':` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L404 | `if (!accusationsState || typeof accusationsState !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L413 | `'verde': 'neutral',` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L414 | `'naranja': 'pedito',` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L415 | `'rojo': 'pedorro'` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L443 | `if (!accusations || typeof accusations !== 'object' || typeof totalPlayers !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L468 | `const validRoles = ['neutral', 'pedito', 'pedorro'];` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L502 | `if (!accusationsData || typeof accusationsData !== 'object' || typeof totalPlayers !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L528 | `if (accusation && typeof accusation === 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L534 | `const validRoles = ['neutral', 'pedito', 'pedorro'];` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L580 | `if (!acusations || typeof acusations !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L589 | `} else if (!peditos.every(p => typeof p === 'number' && p > 0)) {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L594 | `if (typeof pedorro !== 'number' || pedorro <= 0) {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L604 | `if (acusations && typeof acusations === 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L606 | `if (!key.startsWith('acusation')) {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L611 | `if (!accusation || typeof accusation !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L617 | `const validRoles = ['neutral', 'pedito', 'pedorro'];` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L647 | `if (playerAccusations[peditoNumber] === 'pedito') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L662 | `if (!allAccusations || typeof pedorro !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L669 | `if (!key.startsWith('acusation')) continue;` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L671 | `if (accusation && accusation[pedorro] === 'pedorro') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L689 | `if (!playerAccusations || !Array.isArray(peditos) || typeof pedorro !== 'number') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L709 | `if (playerAccusations[pedorro] === 'pedorro') {` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L738 | `if (!key.startsWith('acusation')) continue;` |
| `file:///Users/jordimarti/Development/pedorro/web/lib.js` | L740 | `const playerNumber = parseInt(key.replace('acusation', ''));` |
| `file:///Users/jordimarti/Development/pedorro/test/unit/parseGameURL.test.js` | L20 | `expect(result.gameCode).toBe('galerna');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L61 | `// Estado local de acusaciones (jugador -> 'verde'|'naranja'|'rojo')` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L71 | `* Activa un elemento removiendo 'inactive' y a√±adiendo 'active'` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L76 | `element.classList.remove('inactive');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L77 | `element.classList.add('active');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L82 | `* Desactiva un elemento removiendo 'active' y a√±adiendo 'inactive'` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L87 | `element.classList.remove('active');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L88 | `element.classList.add('inactive');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L100 | `element.style.display = 'block';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L102 | `element.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L145 | `case 'START':` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L148 | `case 'ACUSE':` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L151 | `case 'RANKING':` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L173 | `const isGameActive = gameScreen.classList.contains('active');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L174 | `const isLoginActive = loginScreen.classList.contains('active');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L198 | `playerInfoElement.style.display = 'block';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L328 | `nextRoundBtn.addEventListener('click', () => handleNextRoundClick(gameState));` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L352 | `if (gameState.state !== 'RANKING') {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L368 | `gameState = changeGameState(gameState, 'START', newNumRound);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L430 | `limpiarBtn.addEventListener('click', handleLimpioClick);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L436 | `peditoBtn.addEventListener('click', () => handlePeditoClick(gameState));` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L442 | `pedorroBtn.addEventListener('click', () => handlePedorroClick(gameState));` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L514 | `const playerButton = document.createElement('button');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L520 | `playerButton.addEventListener('click', () => handlePlayerButtonClick(i));` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L528 | `accusationsState[i] = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L534 | `accusationsState[i] = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L544 | `const currentState = accusationsState[playerNumber] || 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L548 | `case 'verde':` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L549 | `newState = 'naranja';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L551 | `case 'naranja':` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L552 | `newState = 'rojo';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L554 | `case 'rojo':` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L555 | `newState = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L558 | `newState = 'verde';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L589 | `acusarButton.classList.remove('disabled');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L597 | `acusarButton.classList.add('disabled');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L673 | `console.log('Jugador:', playerInfo.playerNumber, 'de', playerInfo.totalPlayers);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L678 | `console.log('Ronda actual:', roundInfo.currentRound, 'de', roundInfo.maxRounds);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L707 | `disimularButton.addEventListener('click', async () => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L712 | `console.log('Jugador:', gameState.playerNumber, 'de', gameState.totalPlayers);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L727 | `reiniciarButton.addEventListener('click', async () => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L730 | `console.log('Jugador:', gameState.playerNumber, 'de', gameState.totalPlayers);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L766 | `acusarButton.addEventListener('click', async () => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L811 | `acusarButton.classList.add('disabled');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L936 | `accederButton.addEventListener('click', handleLogin);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L944 | `document.addEventListener('DOMContentLoaded', initializeApp);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L947 | `window.addEventListener('beforeunload', () => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L956 | `window.addEventListener('pagehide', () => {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L982 | `mainContent.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L983 | `disimularContainer.style.display = 'flex';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L986 | `disimulandoDisplay.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L996 | `countdownDisplay.style.display = 'flex';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1007 | `countdownDisplay.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1008 | `disimulandoDisplay.style.display = 'flex';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1025 | `disimularContainer.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1142 | `investigarContainer.style.display = 'flex';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1147 | `investigarButton.style.display = 'block';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1148 | `investigarText.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1151 | `investigarButton.addEventListener('click', handleInvestigarClick);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1154 | `investigarButton.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1155 | `investigarText.style.display = 'flex';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1178 | `const result = await updateGameState(gameState.gameCode, 'ACUSE');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1184 | `gameState = changeGameState(gameState, 'ACUSE');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1190 | `investigarContainer.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1207 | `window.removeEventListener('pointerdown', __unlockOnce);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1208 | `window.removeEventListener('touchend', __unlockOnce);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1209 | `window.removeEventListener('click', __unlockOnce);` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1211 | `window.addEventListener('pointerdown', __unlockOnce, { once: true });` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1212 | `window.addEventListener('touchend', __unlockOnce, { once: true });` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1213 | `window.addEventListener('click', __unlockOnce, { once: true });` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1334 | `counterContainer.style.display = 'block';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1345 | `if (progress.totalSent === progress.totalExpected && gameState.state === 'ACUSE') {` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1356 | `const result = await updateGameState(gameState.gameCode, 'RANKING');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1362 | `gameState = changeGameState(gameState, 'RANKING');` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1381 | `counterContainer.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1385 | `counterContainer.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/script.js` | L1402 | `counterContainer.style.display = 'none';` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L41 | `state: 'START',` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L70 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L103 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L111 | `if (!nextSounds || typeof nextSounds !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L148 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L173 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L208 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L234 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L238 | `if (!newState || typeof newState !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L275 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L279 | `if (!playerNumber || typeof playerNumber !== 'number' || playerNumber < 1) {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L283 | `if (!accusations || typeof accusations !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L324 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L328 | `if (typeof callback !== 'function') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L361 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L365 | `if (!ranking || typeof ranking !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L369 | `if (!lastRoundScore || typeof lastRoundScore !== 'object') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L410 | `if (!gameCode || typeof gameCode !== 'string') {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L414 | `if (typeof newNumRound !== 'number' || newNumRound < 1) {` |
| `file:///Users/jordimarti/Development/pedorro/web/firebase-database.js` | L420 | `state: 'START',` |

</details>

---

Ahora voy a buscar espec√≠ficamente en el archivo `script.js` para ver todos los casos del switch statement que maneja los estados:


---

Read file: web/script.js

---

Perfecto! Ahora tengo una visi√≥n clara de los posibles valores del campo "STATE". Bas√°ndome en el c√≥digo que he revisado, puedo identificar los tres estados principales del juego:

## Valores del campo "STATE" en la base de datos

El campo `state` en la base de datos de Firebase puede tener los siguientes valores:

### 1. **`'START'`** 
- **Estado inicial del juego**: Cuando se inicia una nueva ronda o se reinicia el juego
- **Funcionalidad**: Muestra la pantalla de inicio donde los jugadores pueden:
  - Ver la ronda actual
  - Ver informaci√≥n del jugador
  - Acceder al bot√≥n "DISIMULAR" (solo para el jugador 1)
  - Acceder al bot√≥n "REINICIAR" (solo para el jugador 1)

### 2. **`'ACUSE'`** 
- **Estado de acusaciones**: Cuando los jugadores est√°n en la fase de acusar a otros jugadores
- **Funcionalidad**: Muestra la pantalla de acusaciones donde:
  - Los jugadores pueden acusar a otros jugadores
  - Se muestran botones para cada jugador con colores (verde, naranja, rojo)
  - Se puede enviar las acusaciones
  - Se muestra el progreso de acusaciones enviadas

### 3. **`'RANKING'`** 
- **Estado de resultados**: Cuando se muestran los resultados y puntuaciones
- **Funcionalidad**: Muestra la pantalla de ranking donde:
  - Se visualiza la tabla de puntuaciones
  - Se muestran los resultados de la ronda actual
  - Se puede pasar a la siguiente ronda (bot√≥n "SIGUIENTE RONDA")
  - Solo visible para el jugador 1

### Flujo de estados t√≠pico:
```
START ‚Üí ACUSE ‚Üí RANKING ‚Üí START (nueva ronda)
```

### Notas importantes:
- El estado se inicializa siempre como `'START'` cuando se crea o reinicia un juego
- Las transiciones entre estados se manejan a trav√©s de la funci√≥n `updateGameState()` en Firebase
- Cada estado tiene su propia pantalla y funcionalidad espec√≠fica
- El estado se sincroniza en tiempo real entre todos los jugadores conectados al mismo juego

Estos estados representan las diferentes fases del juego "PEDORROS" y controlan qu√© pantalla se muestra y qu√© funcionalidades est√°n disponibles para los jugadores.

---

_**User**_

puedes cambiar @README.md para que eso quede asi de claro? Un apartado nuevo en plan "ESTADOS DE LA BD"

---

_**Assistant**_

¬°Por supuesto! Voy a a√±adir una nueva secci√≥n "ESTADOS DE LA BD" al README para que quede muy claro qu√© valores puede tener el campo "STATE" en la base de datos.


---

Read file: README.md

---

Ahora voy a a√±adir la nueva secci√≥n "ESTADOS DE LA BD" despu√©s de la descripci√≥n y antes de las funcionalidades implementadas:

```markdown:README.md
# PEDORROS - Juego de Fiesta Multijugador

[![Tests](https://img.shields.io/badge/tests-155%20passed-brightgreen)](https://github.com/yourusername/pedorro)
[![Node.js](https://img.shields.io/badge/node-20.x-brightgreen)](https://nodejs.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

## ÔøΩÔøΩ Descripci√≥n

PEDORROS es una aplicaci√≥n web de fiesta multijugador que simula un juego de detective social. Los jugadores deben identificar qui√©n ha sido el "pedorro" (el que se ha echado un pedo) y qui√©nes han sido los "peditos" (pedos menores) bas√°ndose √∫nicamente en los sonidos reproducidos por la aplicaci√≥n.

## üóÑÔ∏è ESTADOS DE LA BD

El campo `state` en la base de datos de Firebase puede tener los siguientes valores que controlan el flujo del juego:

### üöÄ **`'START'`** - Estado Inicial del Juego
- **Cu√°ndo se activa**: Al iniciar una nueva ronda o reiniciar el juego
- **Funcionalidad disponible**:
  - Pantalla de inicio con informaci√≥n de ronda actual
  - Bot√≥n "DISIMULAR" prominente y centrado
  - Informaci√≥n del jugador (Jugador X / Y)
  - Bot√≥n "REINICIAR" (solo para jugador 1)
- **Campos de BD activos**: `numRound`, `playerNumber`, `totalPlayers`

### üîç **`'ACUSE'`** - Estado de Acusaciones
- **Cu√°ndo se activa**: Despu√©s de la secuencia DISIMULAR + INVESTIGAR
- **Funcionalidad disponible**:
  - Pantalla de acusaciones con grid de jugadores
  - Botones de colores para acusar (verde ‚Üí naranja ‚Üí rojo)
  - Botones de sonidos (LIMPIO, PEDITO, PEDORRO)
  - Bot√≥n "ACUSAR" cuando se completan las acusaciones
- **Campos de BD activos**: `acusations`, `peditos`, `pedorro`, `nextSounds`

### üèÜ **`'RANKING'`** - Estado de Resultados
- **Cu√°ndo se activa**: Cuando todos los jugadores han enviado sus acusaciones
- **Funcionalidad disponible**:
  - Pantalla de ranking con puntuaciones de la ronda
  - Tabla de puntuaciones totales acumula

---

_**User**_

perdon, que tenias deshabilitado los tools, ¬øpuede shacer elcambio?

---

_**Assistant**_

¬°Por supuesto! Ahora s√≠ tengo acceso a las herramientas. Voy a a√±adir la nueva secci√≥n "ESTADOS DE LA BD" al README para que quede muy claro qu√© valores puede tener el campo "STATE" en la base de datos.


---

<details><summary>Edit file: README.md</summary>

undefined

**Chunk 1**
Lines added: 42, lines removed: undefined

```diff
@@ -8,4 +8,46 @@
  
  PEDORROS es una aplicaci√≥n web de fiesta multijugador que simula un juego de detective social. Los jugadores deben identificar qui√©n ha sido el "pedorro" (el que se ha echado un pedo) y qui√©nes han sido los "peditos" (pedos menores) bas√°ndose √∫nicamente en los sonidos reproducidos por la aplicaci√≥n.
+ 
+ ## üóÑÔ∏è ESTADOS DE LA BD
+ 
+ El campo `state` en la base de datos de Firebase puede tener los siguientes valores que controlan el flujo del juego:
+ 
+ ### üöÄ **`'START'`** - Estado Inicial del Juego
+ - **Cu√°ndo se activa**: Al iniciar una nueva ronda o reiniciar el juego
+ - **Funcionalidad disponible**:
+   - Pantalla de inicio con informaci√≥n de ronda actual
+   - Bot√≥n "DISIMULAR" prominente y centrado
+   - Informaci√≥n del jugador (Jugador X / Y)
+   - Bot√≥n "REINICIAR" (solo para jugador 1)
+ - **Campos de BD activos**: `numRound`, `playerNumber`, `totalPlayers`
+ 
+ ### üîç **`'ACUSE'`** - Estado de Acusaciones
+ - **Cu√°ndo se activa**: Despu√©s de la secuencia DISIMULAR + INVESTIGAR
+ - **Funcionalidad disponible**:
+   - Pantalla de acusaciones con grid de jugadores
+   - Botones de colores para acusar (verde ‚Üí naranja ‚Üí rojo)
+   - Botones de sonidos (LIMPIO, PEDITO, PEDORRO)
+   - Bot√≥n "ACUSAR" cuando se completan las acusaciones
+ - **Campos de BD activos**: `acusations`, `peditos`, `pedorro`, `nextSounds`
+ 
+ ### üèÜ **`'RANKING'`** - Estado de Resultados
+ - **Cu√°ndo se activa**: Cuando todos los jugadores han enviado sus acusaciones
+ - **Funcionalidad disponible**:
+   - Pantalla de ranking con puntuaciones de la ronda
+   - Tabla de puntuaciones totales acumulativas
+   - Bot√≥n "SIGUIENTE RONDA" (solo para jugador 1)
+ - **Campos de BD activos**: `ranking`, `lastRoundScore`, `acusations`
+ 
+ ### üîÑ **Flujo de Estados T√≠pico**
+ ```
+ START ‚Üí ACUSE ‚Üí RANKING ‚Üí START (nueva ronda)
+ ```
+ 
+ ### üìù **Notas Importantes**
+ - El estado se inicializa siempre como `'START'` cuando se crea o reinicia un juego
+ - Las transiciones entre estados se manejan a trav√©s de `updateGameState()` en Firebase
+ - Cada estado tiene su propia pantalla y funcionalidad espec√≠fica
+ - El estado se sincroniza en tiempo real entre todos los jugadores conectados
+ - Solo el jugador 1 (director del juego) puede cambiar el estado del juego
  
  ## ‚ú® Funcionalidades Implementadas
```

</details>

---

¬°Perfecto! He a√±adido la nueva secci√≥n "ESTADOS DE LA BD" al README. Ahora queda muy claro qu√© valores puede tener el campo "STATE" en la base de datos de Firebase.

La nueva secci√≥n incluye:

1. **`'START'`** - Estado inicial del juego con funcionalidades de inicio
2. **`'ACUSE'`** - Estado de acusaciones con sistema de votaci√≥n
3. **`'RANKING'`** - Estado de resultados y puntuaciones
4. **Flujo de estados t√≠pico** que muestra la secuencia normal del juego
5. **Notas importantes** sobre c√≥mo se manejan las transiciones y permisos

Cada estado est√° documentado con:
- Cu√°ndo se activa
- Qu√© funcionalidades est√°n disponibles
- Qu√© campos de la base de datos est√°n activos en ese momento

Esto hace que sea mucho m√°s f√°cil para cualquier desarrollador entender c√≥mo funciona el sistema de estados del juego y qu√© esperar en cada fase.

---

