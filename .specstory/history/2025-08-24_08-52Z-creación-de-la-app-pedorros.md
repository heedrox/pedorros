<!-- Generated by SpecStory -->

# Creaci√≥n de la app "PEDORROS" (2025-08-24 08:52Z)

_**User**_

@create-brief.md Vamos a crear una app que se llama "PEDORROS". Busca ser una aplicaci√≥n divertida, estilo party, para jugar en el m√≥vil entre varios jugadores, en el que hay que pillar al pedorro, ¬øqui√©n se ha echado un pedo, que huele a caramelo?

Para eso, la din√°mica es:
- Varias personas se conectan a la app con su m√≥vil
- La app escoge "un pedorro" y algunos "peditos".
- Los jugadores ponen en el centro de la mesa todos sus m√≥viles en c√≠rculo.
- La aplicaci√≥n ejecuta sonidos (son pedos). Uno ser√° el del pedorro, y otros ser√°n peditos m√°s peque√±os.
- Los jugadores tienen que elegir qui√©n es el pedorro y qui√©nes son los peditos. El pedorro sabe que ha sido √©l, y por tanto, tiene que evitar que le descubran.
- Ganan puntos quienes m√°s peditos y pedorros descubren, mientras que no les pillan por ser pedorro.

As√≠ se jugar√° hasta 5 rondas. Los jugadores ver√°n el ranking entre ronda y ronda, y su puntuaci√≥n de la ronda actual.

Las pantallas que he previsto son:
- STATE = "START", donde los jugadores ver√°n cu√°ntos pedorros y peditos hay en esa ronda, y un bot√≥n "DISIMULAR".
- Un contador ir√° corriendo: 5, 4, 3, 2, 1, ... DISIMULANDO.
- Cuando se vea en la pantalla DISIMULANDO, saldr√°n los distintos sonidos. Un pedorro, algunos peditos y algunos en silencio.
- Se ver√° luego un bot√≥n INVESTIGAR. 
- STATE = "ACUSE" . Al pulsar el bot√≥n INVESTIGAR, pasamos a este estado en el que se muestra si has sido el pedorro o no. Y un listado de todos los jugadores de 1 hasta num jugadores, en el que cada bot√≥n est√° en verde (no ha hecho nada), naranja (se ha echado un pedito) y rojo (ha sido el pedorro).
- Al pulsar terminar, pasamos al state = "RESULTS", donde se ven los resultados actuales, y el ranking de todas las rondas.
- Al pulsar "SIGUIENTE RONDA", pasamos otra vez a state = "START".

Usaremos una BD firebase, y sin servidor backend, lo haremos todo desde el front. El jugador 1 ser√° quien har√° de director de juego (pero participar√° tambi√©n). Por ejemplo, los c√°lculos centralizados se har√°n por defecto en el jugador 1 solo, y el boton INVESTIGAR por ejemplo, que cambia de estado, tambi√©n lo ver√° √©l solo. En el state ACUSE, el jugador 1 ver√° cu√°ntos han acusado ya y por tanto, debe ser el √∫ltimo en darle a TERMINAR y cuando pulsa, pasar√°n todos a state = "RESULT", y en ese estado, tambi√©n, el bot√≥n "SIGUIENTE RONDA" solo lo ver√° √©l para pasar al estado START. Como el bot√≥n "DISIMULAR" es algo que todo el mundo ve, porque no tiene l√≥gica centralizada, y es algo que tiene que ocurrir en todos los m√≥viles (y no cambia el state), ese bot√≥n s√≠ lo ve todo el mundo.

El resultado de la ronda ser√° en base a: cu√°ntos peditos has acertado, si has acertado el pedorro, y te dar√°n puntos extra si eres el pedorro que no han acertado. Pero para ser colaborativo, al menos varias personas deben acertar al pedorro para llevarte los puntos.

Si tienes alguna pregunta, o no est√°s segura de algo, dime y te respondo.

---

_**Assistant**_

Perfecto, entiendo la idea de la aplicaci√≥n "PEDORROS". Es un concepto muy divertido y original para juegos de fiesta. Antes de crear el product brief, tengo algunas preguntas para asegurarme de capturar todos los detalles importantes:

1. **Sobre la mec√°nica de juego:**
   - ¬øCu√°ntos jugadores m√≠nimo y m√°ximo puede tener una partida?
   - ¬øLos "peditos" son siempre el mismo n√∫mero o var√≠a por ronda?
   - ¬øEl sonido del pedorro es claramente diferente al de los peditos?

2. **Sobre la puntuaci√≥n:**
   - ¬øCu√°ntos puntos se dan por acertar un pedito vs. acertar el pedorro?
   - ¬øCu√°ntos puntos extra recibe el pedorro si no le descubren?
   - ¬øCu√°ntas personas m√≠nimo deben acertar al pedorro para que reciban los puntos?

3. **Sobre la experiencia de usuario:**
   - ¬øLa app debe funcionar offline o solo online?
   - ¬øLos jugadores se identifican con nombres o solo con n√∫meros?
   - ¬øHay alg√∫n l√≠mite de tiempo para las acusaciones?

4. **Sobre la tecnolog√≠a:**
   - ¬øPrefieres que sea una PWA (Progressive Web App) para que se pueda instalar en el m√≥vil?
   - ¬øLos sonidos se reproducen autom√°ticamente o el jugador 1 los activa manualmente?

Mientras tanto, voy a revisar la estructura del proyecto para entender mejor el contexto t√©cnico actual.


---

<details>
            <summary>Listed current directory ‚Ä¢ **11** results</summary>
        
| Name |
|-------|
| üìÅ `.git` |
| üìÅ `web` |
| üìÑ `firebase.json` |
| üìÅ `test` |
| üìÅ `.github` |
| üìÅ `.cursor` |
| üìÑ `.gitignore` |
| üìÑ `.firebaserc` |
| üìÑ `.nvmrc` |
| üìÅ `.specstory` |
| üìÑ `.cursorindexingignore` |

</details>

---

Read file: firebase.json

---

<details>
            <summary>Listed directory web ‚Ä¢ **1** results</summary>
        
| Name |
|-------|
| üìÑ `index.html` |

</details>

---

Read file: web/index.html

---

Perfecto, veo que ya tienes configurado Firebase Hosting para la aplicaci√≥n. Ahora, bas√°ndome en lo que entiendo del juego, voy a crear el product brief. Mientras tanto, te respondo algunas de mis preguntas con lo que puedo inferir:

- Parece que ser√° una PWA (Progressive Web App) ya que est√° en Firebase Hosting
- La estructura est√° preparada para una aplicaci√≥n web que se ejecuta en el frontend
- El nombre del sitio en Firebase es "pedorros"

Voy a crear el product brief con la informaci√≥n que tengo, y luego puedes corregir o ampliar cualquier detalle:


---

<details><summary>Edit file: docs/PRODUCT_BRIEF.md</summary>

Voy a crear un product brief completo para la aplicaci√≥n PEDORROS basado en la descripci√≥n del usuario

**Chunk 1**
Lines added: 68, lines removed: 1

```diff
@@ -1,1 +1,68 @@
- 
+ # PEDORROS - Product Brief
+ 
+ ## Resumen del Proyecto
+ 
+ PEDORROS es una aplicaci√≥n m√≥vil de fiesta multijugador que simula un juego de detective social. Los jugadores deben identificar qui√©n ha sido el "pedorro" (el que se ha echado un pedo) y qui√©nes han sido los "peditos" (pedos menores) bas√°ndose √∫nicamente en los sonidos reproducidos por la aplicaci√≥n.
+ 
+ ## Audiencia Objetivo
+ 
+ - **Jugadores de fiesta**: Personas que buscan entretenimiento grupal divertido y casual
+ - **Grupos de amigos**: Ideal para reuniones sociales, fiestas, o momentos de ocio
+ - **Edad**: Adolescentes y adultos que aprecian el humor irreverente
+ - **Tama√±o de grupo**: 3-8 jugadores (por confirmar l√≠mites exactos)
+ 
+ ## Beneficios y Caracter√≠sticas Principales
+ 
+ ### Core Gameplay
+ - **Juego de deducci√≥n social**: Combina elementos de misterio con interacci√≥n social
+ - **Mec√°nica √∫nica**: Uso de sonidos para crear pistas auditivas
+ - **Competitivo y colaborativo**: Sistema de puntuaci√≥n que premia tanto la habilidad individual como la colaboraci√≥n grupal
+ - **Sin preparaci√≥n**: Solo requiere m√≥viles y la aplicaci√≥n
+ 
+ ### Experiencia de Usuario
+ - **Interfaz intuitiva**: Estados claros y transiciones fluidas entre fases del juego
+ - **Sincronizaci√≥n en tiempo real**: Todos los jugadores experimentan el juego simult√°neamente
+ - **Liderazgo distribuido**: El jugador 1 act√∫a como director de juego mientras participa
+ 
+ ### Sistema de Puntuaci√≥n
+ - Puntos por acertar peditos individuales
+ - Puntos por acertar al pedorro (requiere colaboraci√≥n grupal)
+ - Bonificaci√≥n para pedorros que evitan ser descubiertos
+ - Ranking visible entre rondas
+ 
+ ## Tecnolog√≠a y Arquitectura
+ 
+ ### Stack Tecnol√≥gico
+ - **Frontend**: Aplicaci√≥n web progresiva (PWA) con JavaScript vanilla
+ - **Base de datos**: Firebase Realtime Database para sincronizaci√≥n en tiempo real
+ - **Hosting**: Firebase Hosting para despliegue
+ - **Backend**: Sin servidor tradicional - l√≥gica distribuida en el frontend
+ 
+ ### Arquitectura de Alto Nivel
+ - **Arquitectura peer-to-peer**: Los dispositivos se comunican a trav√©s de Firebase
+ - **Jugador maestro**: El jugador 1 coordina los cambios de estado y c√°lculos centralizados
+ - **Sincronizaci√≥n en tiempo real**: Todos los dispositivos reflejan el mismo estado del juego
+ - **Estados del juego**: START ‚Üí DISIMULANDO ‚Üí ACUSE ‚Üí RESULTS ‚Üí START (ciclo de 5 rondas)
+ 
+ ### Estados del Juego
+ 1. **START**: Configuraci√≥n de ronda y bot√≥n "DISIMULAR"
+ 2. **DISIMULANDO**: Contador regresivo y reproducci√≥n de sonidos
+ 3. **ACUSE**: Selecci√≥n de jugadores y votaci√≥n
+ 4. **RESULTS**: Puntuaciones y ranking
+ 5. **Ciclo**: Retorno a START para siguiente ronda
+ 
+ ## Requisitos T√©cnicos
+ 
+ - **Responsive design**: Optimizado para dispositivos m√≥viles
+ - **Audio**: Reproducci√≥n de m√∫ltiples tipos de sonidos
+ - **Tiempo real**: Sincronizaci√≥n instant√°nea entre dispositivos
+ - **Offline capability**: Funcionamiento b√°sico sin conexi√≥n (por confirmar)
+ - **Cross-platform**: Funciona en cualquier navegador m√≥vil moderno
+ 
+ ## M√©tricas de √âxito
+ 
+ - **Engagement**: Tiempo de juego por sesi√≥n
+ - **Retenci√≥n**: Jugadores que completan las 5 rondas
+ - **Satisfacci√≥n**: Feedback de usuarios sobre la experiencia
+ - **Viralidad**: Compartir la aplicaci√≥n con otros grupos
+ 
```

</details>

---

¬°Perfecto! He creado el product brief para PEDORROS en `docs/PRODUCT_BRIEF.md`. 

El documento captura la esencia de tu juego de fiesta multijugador, incluyendo:

- **Resumen claro** del concepto del juego
- **Audiencia objetivo** bien definida
- **Caracter√≠sticas principales** del gameplay y UX
- **Arquitectura t√©cnica** basada en Firebase y frontend
- **Estados del juego** que has descrito
- **Requisitos t√©cnicos** y m√©tricas de √©xito

Algunas notas sobre lo que he incluido:
- He asumido un rango de 3-8 jugadores (puedes ajustarlo)
- He marcado algunas cosas como "por confirmar" donde necesitaba m√°s detalles
- He estructurado la informaci√≥n de manera que sea f√°cil de entender para otros desarrolladores

¬øTe parece que el brief captura bien la visi√≥n del proyecto? ¬øHay algo que quieras que ajuste o ampl√≠e antes de que empecemos a implementar la aplicaci√≥n?

---

_**User**_

Sobre la mec√°nica de juego:
¬øCu√°ntos jugadores m√≠nimo y m√°ximo puede tener una partida? -> Minimo: 4, Maximo: 16
¬øLos "peditos" son siempre el mismo n√∫mero o var√≠a por ronda? Variar√°n, te paso una tabla:
num jugaodres - peditos - pedorros - no hacen nada
4 - 2- 1 -1
5 - 2-1-2
6-3-1-2
7-4-1-2
8-4-1-3
9-5-1-3
10-6-1-3
11-6-1-4
12- 7-1-4
13-8-1-4
14-8-1-5
15-9-1-5
16-10-1-5
¬øEl sonido del pedorro es claramente diferente al de los peditos? Si, te pasare unos pedos. Es verdad que a veces el pedorro sonar√° de una form ay otra de otra, para hacer el juego m√°s variado. Y lo mismo con los peditos.

2. Sobre la puntuaci√≥n: iteraremos esto bastante hasta encontrar con algo divertido.

3. UX:
- La app debe funcionar online (realtime firebase)
- Los jugadores por ahora se identifican con n√∫meros
- No hay l√≠omite de tiempo

4 - Tecnologia
- Por ahora no hace falta PWA, pero quiero que sea todo web con firebase
- Los sonidos se reproducen a los 5 segundos (un contador) desde que todos, de forma simult√°nea, presionar√°n DISIMULAR.

---

_**Assistant**_

¬°Perfecto! Ahora tengo mucha m√°s claridad sobre la mec√°nica del juego. Voy a actualizar el product brief con estos detalles importantes:


---

<details><summary>Edit file: docs/PRODUCT_BRIEF.md</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -10,5 +10,5 @@
  - **Grupos de amigos**: Ideal para reuniones sociales, fiestas, o momentos de ocio
  - **Edad**: Adolescentes y adultos que aprecian el humor irreverente
- - **Tama√±o de grupo**: 3-8 jugadores (por confirmar l√≠mites exactos)
+ - **Tama√±o de grupo**: 4-16 jugadores
  
  ## Beneficios y Caracter√≠sticas Principales
```

</details>

---

<details><summary>Edit file: docs/PRODUCT_BRIEF.md</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -19,4 +19,5 @@
  - **Competitivo y colaborativo**: Sistema de puntuaci√≥n que premia tanto la habilidad individual como la colaboraci√≥n grupal
  - **Sin preparaci√≥n**: Solo requiere m√≥viles y la aplicaci√≥n
+ - **Distribuci√≥n variable**: El n√∫mero de peditos y jugadores neutrales var√≠a seg√∫n el total de participantes
  
  ### Experiencia de Usuario
```

</details>

---

The string to replace was not found in the file.

---

Read file: docs/PRODUCT_BRIEF.md

---

Ahora voy a actualizar la secci√≥n de estados del juego y agregar la tabla de distribuci√≥n:


---

<details><summary>Edit file: docs/PRODUCT_BRIEF.md</summary>

undefined

**Chunk 1**
Lines added: 18, lines removed: 1

```diff
@@ -48,8 +48,25 @@
  ### Estados del Juego
  1. **START**: Configuraci√≥n de ronda y bot√≥n "DISIMULAR"
- 2. **DISIMULANDO**: Contador regresivo y reproducci√≥n de sonidos
+ 2. **DISIMULANDO**: Contador regresivo de 5 segundos y reproducci√≥n autom√°tica de sonidos
  3. **ACUSE**: Selecci√≥n de jugadores y votaci√≥n
  4. **RESULTS**: Puntuaciones y ranking
  5. **Ciclo**: Retorno a START para siguiente ronda
+ 
+ ### Distribuci√≥n de Roles por N√∫mero de Jugadores
+ | Jugadores | Peditos | Pedorros | Neutrales |
+ |-----------|---------|----------|-----------|
+ | 4         | 2       | 1        | 1         |
+ | 5         | 2       | 1        | 2         |
+ | 6         | 3       | 1        | 2         |
+ | 7         | 4       | 1        | 2         |
+ | 8         | 4       | 1        | 3         |
+ | 9         | 5       | 1        | 3         |
+ | 10        | 6       | 1        | 3         |
+ | 11        | 6       | 1        | 4         |
+ | 12        | 7       | 1        | 4         |
+ | 13        | 8       | 1        | 4         |
+ | 14        | 8       | 1        | 5         |
+ | 15        | 9       | 1        | 5         |
+ | 16        | 10      | 1        | 5         |
  
  ## Requisitos T√©cnicos
```

</details>

---

Ahora voy a actualizar otras secciones con la informaci√≥n adicional:


---

<details><summary>Edit file: docs/PRODUCT_BRIEF.md</summary>

undefined

**Chunk 1**
Lines added: 2, lines removed: undefined

```diff
@@ -25,4 +25,6 @@
  - **Sincronizaci√≥n en tiempo real**: Todos los jugadores experimentan el juego simult√°neamente
  - **Liderazgo distribuido**: El jugador 1 act√∫a como director de juego mientras participa
+ - **Identificaci√≥n num√©rica**: Los jugadores se identifican con n√∫meros del 1 al total de participantes
+ - **Sin l√≠mite de tiempo**: Las acusaciones no tienen restricci√≥n temporal
  
  ### Sistema de Puntuaci√≥n
```

</details>

---

<details><summary>Edit file: docs/PRODUCT_BRIEF.md</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -37,5 +37,5 @@
  
  ### Stack Tecnol√≥gico
- - **Frontend**: Aplicaci√≥n web progresiva (PWA) con JavaScript vanilla
+ - **Frontend**: Aplicaci√≥n web con JavaScript vanilla
  - **Base de datos**: Firebase Realtime Database para sincronizaci√≥n en tiempo real
  - **Hosting**: Firebase Hosting para despliegue
```

</details>

---

<details><summary>Edit file: docs/PRODUCT_BRIEF.md</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -77,5 +77,5 @@
  - **Audio**: Reproducci√≥n de m√∫ltiples tipos de sonidos
  - **Tiempo real**: Sincronizaci√≥n instant√°nea entre dispositivos
- - **Offline capability**: Funcionamiento b√°sico sin conexi√≥n (por confirmar)
+ - **Online only**: Requiere conexi√≥n a internet para funcionar
  - **Cross-platform**: Funciona en cualquier navegador m√≥vil moderno
  
```

</details>

---

Ahora voy a agregar una secci√≥n espec√≠fica sobre el sistema de audio:


---

<details><summary>Edit file: docs/PRODUCT_BRIEF.md</summary>

undefined

**Chunk 1**
Lines added: 6, lines removed: undefined

```diff
@@ -79,4 +79,10 @@
  - **Online only**: Requiere conexi√≥n a internet para funcionar
  - **Cross-platform**: Funciona en cualquier navegador m√≥vil moderno
+ 
+ ### Sistema de Audio
+ - **Variedad de sonidos**: Diferentes tipos de pedos para pedorros y peditos
+ - **Sincronizaci√≥n autom√°tica**: Los sonidos se reproducen autom√°ticamente tras 5 segundos del bot√≥n "DISIMULAR"
+ - **Distribuci√≥n aleatoria**: Los roles se asignan aleatoriamente cada ronda
+ - **Sonidos diferenciados**: El pedorro tiene sonidos claramente distintos a los peditos
  
  ## M√©tricas de √âxito
```

</details>

---

¬°Perfecto! He actualizado el product brief con toda la informaci√≥n que me has proporcionado. Los cambios principales incluyen:

## ‚úÖ **Actualizaciones realizadas:**

1. **L√≠mites de jugadores**: 4-16 jugadores
2. **Tabla de distribuci√≥n**: Agregu√© la tabla completa con peditos, pedorros y neutrales para cada n√∫mero de jugadores
3. **Mec√°nica del contador**: Especificado que son 5 segundos desde el bot√≥n "DISIMULAR"
4. **Sistema de audio**: Agregu√© detalles sobre la variedad de sonidos y sincronizaci√≥n
5. **Identificaci√≥n**: Los jugadores se identifican con n√∫meros
6. **Sin l√≠mite de tiempo**: Para las acusaciones
7. **Online only**: Requiere conexi√≥n a internet
8. **No PWA**: Por ahora solo aplicaci√≥n web

## üîç **Preguntas pendientes para iterar:**

- **Sistema de puntuaci√≥n**: Como mencionaste, esto se iterar√° bastante
- **Sonidos espec√≠ficos**: Cuando tengas los archivos de audio, podremos implementar la l√≥gica

El product brief ahora refleja exactamente la mec√°nica del juego que has descrito. ¬øTe parece que est√° completo y correcto? ¬øHay algo m√°s que quieras que ajuste antes de que empecemos a implementar la aplicaci√≥n?

---

_**User**_

Respecto al BRIEF: El estado del juego DISIMULANDO no va a existir, porque quiero que todos los jugadores pulsen DISIMULAR, y no quiero que cambie nada en BD. El estado esa una forma de coordinarse sobre en qu√© pantalla est√°n, pero la de "disimulando" quiero que ocurra cuando sean las personas las que aprietan el m√≥ivl, no hay necesidad de crear ese estado en BD.

---

_**Assistant**_

¬°Ah, perfecto! Entiendo mejor ahora. El estado "DISIMULANDO" no es un estado de la base de datos, sino que es algo que ocurre localmente en cada dispositivo cuando todos pulsan "DISIMULAR" simult√°neamente. Voy a corregir el product brief:


---

<details><summary>Edit file: docs/PRODUCT_BRIEF.md</summary>

undefined

**Chunk 1**
Lines added: 5, lines removed: 4

```diff
@@ -50,8 +50,9 @@
  ### Estados del Juego
  1. **START**: Configuraci√≥n de ronda y bot√≥n "DISIMULAR"
- 2. **DISIMULANDO**: Contador regresivo de 5 segundos y reproducci√≥n autom√°tica de sonidos
- 3. **ACUSE**: Selecci√≥n de jugadores y votaci√≥n
- 4. **RESULTS**: Puntuaciones y ranking
- 5. **Ciclo**: Retorno a START para siguiente ronda
+ 2. **ACUSE**: Selecci√≥n de jugadores y votaci√≥n
+ 3. **RESULTS**: Puntuaciones y ranking
+ 4. **Ciclo**: Retorno a START para siguiente ronda
+ 
+ **Nota**: El bot√≥n "DISIMULAR" no cambia el estado de la base de datos. Es una acci√≥n local que cada jugador ejecuta simult√°neamente, iniciando un contador de 5 segundos en cada dispositivo y reproduciendo los sonidos correspondientes.
  
  ### Distribuci√≥n de Roles por N√∫mero de Jugadores
```

</details>

---



---

