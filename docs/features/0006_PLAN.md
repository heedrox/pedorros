# PLAN TÉCNICO: Botón de Investigar después de Disimular

## Descripción de la Funcionalidad

Una vez que ocurre el countDown de la disimularSequence (después de que en código hagamos "// Esperar 3 segundos mostrando "DISIMULANDO" await new Promise(resolve => setTimeout(resolve, 3000));"), en vez de volver a la "mainContent", se mostrará un botón que pone "(EMOJI NARIZ) INVESTIGAR".

Ese botón solo está disponible para el jugador 1. El resto no ve un botón, solo ve "(EMOJI NARIZ)". No clicable.

Cuando el jugador 1 pulse el botón "INVESTIGAR", lo que hará será cambiar el documento de partida `/pedorros-game/{codigo-juego}` el campo "state" y pondrá ese valor a "ACUSE".

## Archivos y Funciones que Deben Cambiarse

### 1. `web/script.js`
- **Función `startDisimularSequence()`** - Modificar para mostrar botón de investigar en lugar de volver a mainContent
- **Nueva función `showInvestigarButton()`** - Mostrar botón de investigar para jugador 1, texto para otros
- **Nueva función `handleInvestigarClick()`** - Manejar clic del botón investigar y cambiar estado a "ACUSE"

### 2. `web/firebase-database.js`
- **Nueva función `updateGameState()`** - Actualizar el campo "state" del juego en Firebase

### 3. `web/index.html`
- **Nuevo contenedor** para el botón/texto de investigar
- **Nuevo botón** con emoji de nariz y texto "INVESTIGAR"

### 4. `web/styles.css`
- **Nuevos estilos** para el contenedor y botón de investigar

## Algoritmo Paso a Paso

### Fase 1: Modificar la secuencia de disimular
1. En `startDisimularSequence()`, después de los 3 segundos de "DISIMULANDO", en lugar de mostrar mainContent, llamar a `showInvestigarButton()`

### Fase 2: Mostrar botón/texto de investigar
1. Crear función `showInvestigarButton()` que:
   - Para jugador 1: Muestra botón clicable "(👃) INVESTIGAR"
   - Para otros jugadores: Muestra solo texto "(👃)" no clicable
   - Oculta el contenedor de disimular

### Fase 3: Manejar clic del botón investigar
1. Crear función `handleInvestigarClick()` que:
   - Llama a `updateGameState()` para cambiar estado a "ACUSE"
   - Actualiza el estado local del juego
   - Prepara la transición al siguiente estado

### Fase 4: Actualizar base de datos
1. Crear función `updateGameState()` en firebase-database.js que:
   - Actualiza el campo "state" del documento del juego
   - Retorna resultado de la operación

## Fases de Implementación

### Fase 1: Capa de Datos
- Crear función `updateGameState()` en `firebase-database.js`
- Implementar lógica para actualizar estado del juego

### Fase 2: Lógica de Presentación
- Modificar `startDisimularSequence()` en `script.js`
- Crear función `showInvestigarButton()`
- Crear función `handleInvestigarClick()`

### Fase 3: Interfaz de Usuario
- Agregar elementos HTML en `index.html`
- Implementar estilos CSS en `styles.css`

## Detalles Técnicos

- **Emoji**: Usar "👃" para representar la nariz
- **Estado**: Cambiar de estado actual a "ACUSE"
- **Permisos**: Solo jugador 1 puede interactuar con el botón
- **Transición**: Reemplazar pantalla de disimular por botón/texto de investigar
- **Base de datos**: Actualizar campo "state" en documento `/pedorros-game/{codigo-juego}`
